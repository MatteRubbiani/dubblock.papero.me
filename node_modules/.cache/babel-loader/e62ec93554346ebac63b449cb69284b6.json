{"remainingRequest":"C:\\Users\\matte\\Desktop\\papero\\dubblock.papero.me\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\matte\\Desktop\\papero\\dubblock.papero.me\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\matte\\Desktop\\papero\\dubblock.papero.me\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\matte\\Desktop\\papero\\dubblock.papero.me\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\matte\\Desktop\\papero\\dubblock.papero.me\\src\\views\\Game.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\matte\\Desktop\\papero\\dubblock.papero.me\\src\\views\\Game.vue","mtime":1621935332047},{"path":"C:\\Users\\matte\\Desktop\\papero\\dubblock.papero.me\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\matte\\Desktop\\papero\\dubblock.papero.me\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\matte\\Desktop\\papero\\dubblock.papero.me\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\matte\\Desktop\\papero\\dubblock.papero.me\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\matte\\Desktop\\papero\\dubblock.papero.me\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGlvIGZyb20gInNvY2tldC5pby1jbGllbnQiOwppbXBvcnQgVXNlckhhbWJ1cmdlck1lbnUgZnJvbSAiLi4vY29tcG9uZW50cy9Vc2VySGFtYnVyZ2VyTWVudSI7CmltcG9ydCBMb2JieSBmcm9tICIuLi9jb21wb25lbnRzL2dhbWVDb21wb25lbnRzL0xvYmJ5IjsKaW1wb3J0IEdhbWVTY2VuZSBmcm9tICIuLi9jb21wb25lbnRzL2dhbWVDb21wb25lbnRzL0dhbWVTY2VuZSI7CmltcG9ydCB7IHVybHMgfSBmcm9tICIuLi9jb25zdGFudHMvY29uc3RhbnRzIjsKaW1wb3J0IHdlYnNvY2tldEV2ZW50cyBmcm9tICIuLi9jb25zdGFudHMvd2Vic29ja2V0RXZlbnRzIjsKaW1wb3J0IExvYWRpbmcgZnJvbSAiLi4vY29tcG9uZW50cy9Mb2FkaW5nIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHN0b3JlIGZyb20gIi4uL3N0b3JlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJHYW1lIiwKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nOiBMb2FkaW5nLAogICAgR2FtZVNjZW5lOiBHYW1lU2NlbmUsCiAgICBMb2JieTogTG9iYnksCiAgICBVc2VySGFtYnVyZ2VyTWVudTogVXNlckhhbWJ1cmdlck1lbnUKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzb2NrZXQ6IG51bGwsCiAgICAgIHNob3dIYW1idXJnZXJNZW51OiBmYWxzZSwKICAgICAgZ2FtZTogbnVsbCwKICAgICAgc3RhdHVzOiBudWxsIC8vVE9ETzogY2hhbmdlCgogICAgfTsKICAgIC8qcmV0dXJuIHsNCiAgICAgIHNvY2tldDogMSwNCiAgICAgIHNob3dIYW1idXJnZXJNZW51OiBmYWxzZSwNCiAgICAgIGdhbWU6IGdhbWUsDQogICAgICBzdGF0dXM6IDEgLy9UT0RPOiBjaGFuZ2UNCiAgICB9Ki8KICB9LAogIGNvbXB1dGVkOiB7CiAgICBnYW1lSWQ6IGZ1bmN0aW9uIGdhbWVJZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvdXRlLnBhcmFtcy5nYW1lSWQ7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLnNvY2tldCA9IGlvKHVybHMuYmFzZVVybCwgewogICAgICBwYXRoOiB1cmxzLnNvY2tldFBhdGgsCiAgICAgIGF1dG9Db25uZWN0OiB0cnVlCiAgICB9KTsKICAgIHRoaXMuc29ja2V0Lm9uKCJjb25uZWN0IiwgZnVuY3Rpb24gKCkgewogICAgICBfdGhpcy5zb2NrZXQuZW1pdCh3ZWJzb2NrZXRFdmVudHMuQ09OTkVDVF9UT19HQU1FLCB7CiAgICAgICAgZ2FtZUlkOiBfdGhpcy5nYW1lSWQKICAgICAgfSk7CiAgICB9KTsKICAgIHRoaXMuc29ja2V0Lm9uKHdlYnNvY2tldEV2ZW50cy5MT0JCWV9NT0RJRklFRCwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgIF90aGlzLnN0YXR1cyA9IGRhdGEuc3RhdHVzOwogICAgICBfdGhpcy5nYW1lID0gZGF0YTsKICAgIH0pOwogICAgdGhpcy5zb2NrZXQub24od2Vic29ja2V0RXZlbnRzLkdBTUVfTU9ESUZJRUQsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIF90aGlzLmdhbWUgPSBkYXRhOwogICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgX3RoaXMuc3RhdHVzID0gZGF0YS5zdGF0dXM7CiAgICB9KTsKICB9LAogIGJlZm9yZVJvdXRlRW50ZXI6IGZ1bmN0aW9uIGJlZm9yZVJvdXRlRW50ZXIodG8sIGZyb20sIG5leHQpIHsKICAgIC8vbmV4dCgpOwogICAgdmFyIGNyZWF0ZUxvY2FsQWNjb3VudCA9IGZ1bmN0aW9uIGNyZWF0ZUxvY2FsQWNjb3VudCgpIHsKICAgICAgYXhpb3MuZ2V0KHVybHMuY3JlYXRlTG9jYWxBY2NvdW50VXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHN0b3JlLmRpc3BhdGNoKCJzZXRVc2VybmFtZSIsIHJlc3BvbnNlLmRhdGEudXNlcm5hbWUpOwogICAgICAgIHN0b3JlLmRpc3BhdGNoKCJzZXRMb2dnZWQiLCBmYWxzZSk7CiAgICAgICAgbmV4dCgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9jYXRpb24uaHJlZiA9IGxvY2F0aW9uLm9yaWdpbiArICIvZXJyb3I/ZnJvbT0iICsgbG9jYXRpb24ucGF0aG5hbWU7CiAgICAgIH0pOwogICAgfTsKCiAgICBpZiAoc3RvcmUuc3RhdGUudXNlcm5hbWUgPT09ICIiICYmIHN0b3JlLnN0YXRlLmxvZ2dlZCA9PT0gLTEpIHsKICAgICAgLy9zZSBub24gw6ggYW5jb3JhIHN0YXRvIHRyb3ZhdG8gaWwgbG9nZ2VkCiAgICAgIGF4aW9zLmdldCh1cmxzLmdldExvZ2luSW5mb1VybCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSkgewogICAgICAgICAgLy9zZSDDqCBsb2dnYXRvIGluIHF1YWxjaGUgbW9kbwogICAgICAgICAgc3RvcmUuZGlzcGF0Y2goInNldExvZ2dlZCIsIHJlc3BvbnNlLmRhdGEuZ29vZ2xlX3NpZ25lZF9pbik7CiAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgic2V0VXNlcm5hbWUiLCBkZWNvZGVVUklDb21wb25lbnQocmVzcG9uc2UuZGF0YS51c2VybmFtZSkpOwogICAgICAgICAgbmV4dCgpOyAvL3NlIMOoIGxvZ2dhdG8gaW4gcXVhbGNoZSBtb2RvIHB1w7IgYW5kYXJlIGRvdmUgdnVvbGUKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy9zZSBub24gw6ggbG9nZ2F0bwogICAgICAgICAgY3JlYXRlTG9jYWxBY2NvdW50KCk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9jYXRpb24uaHJlZiA9IGxvY2F0aW9uLm9yaWdpbiArICIvZXJyb3I/ZnJvbT0iICsgbG9jYXRpb24ucGF0aG5hbWU7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgaWYgKHN0b3JlLnN0YXRlLnVzZXJuYW1lID09PSBudWxsKSB7CiAgICAgICAgLy9zZSBub24gw6ggbG9nZ2F0bwogICAgICAgIGNyZWF0ZUxvY2FsQWNjb3VudCgpOwogICAgICB9IGVsc2UgbmV4dCgpOyAvL3NlIMOoIGxvZ2dhdG8KCiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\matte\\Desktop\\papero\\dubblock.papero.me\\src\\views\\Game.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <UserHamburgerMenu :show=\"showHamburgerMenu\"\r\n                   :src=\"require('@/assets/hamburger_icon_dark.png')\"\r\n                   @toggle-show=\"showHamburgerMenu=$event\"/>\r\n  <Lobby v-if=\"socket  && status === 0\" :gameId=\"gameId\" :socket=\"socket\" :game=\"game\"></Lobby>\r\n  <GameScene  v-if=\"socket  && status === 1\" :game=\"game\" :socket=\"socket\" ></GameScene>\r\n  <Loading v-if=\"!socket || status === null\"></Loading>\r\n</template>\r\n\r\n\r\n<script>\r\nimport io from \"socket.io-client\";\r\n\r\nimport UserHamburgerMenu from \"../components/UserHamburgerMenu\";\r\nimport Lobby from \"../components/gameComponents/Lobby\";\r\nimport GameScene from \"../components/gameComponents/GameScene\";\r\nimport {urls} from \"../constants/constants\";\r\nimport websocketEvents from \"../constants/websocketEvents\";\r\nimport Loading from \"../components/Loading\";\r\nimport axios from \"axios\";\r\nimport store from \"../store\";\r\n\r\nexport default {\r\n  name: \"Game\",\r\n  components: {Loading, GameScene, Lobby, UserHamburgerMenu},\r\n  data() {\r\n    return {\r\n      socket: null,\r\n      showHamburgerMenu: false,\r\n      game: null,\r\n      status: null //TODO: change\r\n    }\r\n    /*return {\r\n      socket: 1,\r\n      showHamburgerMenu: false,\r\n      game: game,\r\n      status: 1 //TODO: change\r\n    }*/\r\n  },\r\n  computed: {\r\n    gameId: function (){\r\n      return this.$route.params.gameId;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.socket = io(urls.baseUrl, {\r\n      path: urls.socketPath,\r\n      autoConnect: true\r\n    })\r\n\r\n    this.socket.on(\"connect\", () => {\r\n      this.socket.emit(websocketEvents.CONNECT_TO_GAME, {gameId: this.gameId});\r\n    })\r\n\r\n    this.socket.on(websocketEvents.LOBBY_MODIFIED, data => {\r\n      console.log(data)\r\n      this.status = data.status\r\n      this.game = data\r\n    })\r\n\r\n    this.socket.on(websocketEvents.GAME_MODIFIED, data => {\r\n      this.game = data\r\n      console.log(data)\r\n      this.status = data.status\r\n    })\r\n  },\r\n  beforeRouteEnter(to, from, next){\r\n    //next();\r\n    const createLocalAccount = ()=>{\r\n      axios\r\n          .get(urls.createLocalAccountUrl)\r\n          .then((response) => {\r\n            store.dispatch(\"setUsername\", response.data.username);\r\n            store.dispatch(\"setLogged\", false);\r\n            next();\r\n          })\r\n          .catch(() => {\r\n            location.href = location.origin+\"/error?from=\"+location.pathname;\r\n          });\r\n    }\r\n    if(store.state.username === \"\" && store.state.logged === -1) { //se non è ancora stato trovato il logged\r\n      axios\r\n          .get(urls.getLoginInfoUrl)\r\n          .then((response) => {\r\n            if (response.data) { //se è loggato in qualche modo\r\n              store.dispatch(\"setLogged\", response.data.google_signed_in);\r\n              store.dispatch(\"setUsername\", decodeURIComponent(response.data.username));\r\n\r\n              next(); //se è loggato in qualche modo può andare dove vuole\r\n\r\n            } else { //se non è loggato\r\n              createLocalAccount();\r\n            }\r\n          })\r\n          .catch(() => {\r\n            location.href = location.origin+\"/error?from=\"+location.pathname;\r\n          });\r\n    } else {\r\n      if(store.state.username === null){ //se non è loggato\r\n        createLocalAccount();\r\n      } else next(); //se è loggato\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\ntemplate{\r\n  height: 100%;\r\n}\r\n\r\n</style>"],"sourceRoot":""}]}